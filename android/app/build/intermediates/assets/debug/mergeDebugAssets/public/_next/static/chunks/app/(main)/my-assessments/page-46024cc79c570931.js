(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8360],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>l});var r=s(95155),a=s(12115),n=s(32467),i=s(83101),o=s(64269);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},11647:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(95155);s(12115);var a=s(83101),n=s(64269);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(12115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e3);n.set(e,t)},o=[],l={toasts:[]};function c(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),o.forEach(e=>{e(l)})}function d(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18332:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>d,XL:()=>c});var r=s(95155),a=s(12115),n=s(83101),i=s(64269);let o=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:a}),s),...n})});l.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});d.displayName="AlertDescription"},26549:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});let r="https://workwellfut.com"},59402:(e,t,s)=>{"use strict";s.d(t,{$9:()=>l,X_:()=>o,Zy:()=>c,k9:()=>d,s9:()=>m});var r=s(19056),a=s(5282),n=s(80160);let i="workwell-assessment-history";function o(){try{let e=localStorage.getItem(i);return(e?JSON.parse(e):[]).sort((e,t)=>{try{return(0,r.H)(t.timestamp).getTime()-(0,r.H)(e.timestamp).getTime()}catch(e){return 0}})}catch(e){return console.error("Error reading assessment history from localStorage:",e),[]}}function l(e,t){let s={id:crypto.randomUUID(),timestamp:new Date().toISOString(),data:{...e,respuestas:t}};try{let e=o(),t=[s,...e].slice(0,20);return localStorage.setItem(i,JSON.stringify(t)),console.log("AssessmentHistoryStore: Saved new assessment record. Total records:",t.length),window.dispatchEvent(new CustomEvent("assessment-history-updated")),s}catch(e){return console.error("Error saving assessment record to localStorage:",e),s}}function c(e){return o().find(t=>t.id===e)}function d(e){if(!e)return"Fecha no disponible";try{let t=(0,r.H)(e);if(!isNaN(t.getTime()))return(0,a.GP)(t,"dd MMM yyyy, HH:mm",{locale:n.es});let s=new Date(e.replace(" ","T")+(e.includes("Z")?"":"Z"));if(!isNaN(s.getTime()))return(0,a.GP)(s,"dd MMM yyyy, HH:mm",{locale:n.es});return console.error("Error formatting assessment timestamp: Invalid date string provided -",e),"Fecha inv\xe1lida"}catch(t){return console.error("Error critical formatting assessment timestamp for input:",e,t),"Fecha inv\xe1lida"}}function m(e){try{let t=[...e].sort((e,t)=>{try{return(0,r.H)(t.timestamp).getTime()-(0,r.H)(e.timestamp).getTime()}catch(s){try{return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}catch(s){return console.warn("overwriteAssessmentHistory: Could not parse timestamps for sorting",t.timestamp,e.timestamp),0}}}).slice(0,20);localStorage.setItem(i,JSON.stringify(t)),console.log("AssessmentHistoryStore: Overwritten local assessment history with API data. Total records:",t.length),window.dispatchEvent(new CustomEvent("assessment-history-updated"))}catch(e){console.error("Error overwriting assessment history in localStorage:",e)}}},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2821),a=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},66737:(e,t,s)=>{Promise.resolve().then(s.bind(s,88529))},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>m});var r=s(95155),a=s(12115),n=s(64269);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-base",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"},88529:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var r=s(95155),a=s(12115),n=s(52619),i=s.n(n),o=s(50168),l=s(3998),c=s(86948),d=s(59402),m=s(35299),u=s(54485),f=s(89559),p=s(52056),g=s(92301),h=s(52987),x=s(57828),y=s(11647),v=s(29141),b=s(82257),N=s(98734),w=s(44193),j=s(18332),A=s(26549);let T="".concat(A.T,"/wp-content/programacion/wscontenido.php"),S=N.Ik({id:N.Yj(),timestamp:N.Yj().refine(e=>{if(!isNaN(Date.parse(e)))return!0;try{return!isNaN(new Date(e).getTime())}catch(e){return!1}},{message:"Timestamp must be a valid date string"}),data:N.Ik({emotionalProfile:N.KC([N.g1(N.Yj(),N.ai().min(1).max(5)),N.YO(N.bz())]).transform((e,t)=>{if(Array.isArray(e)){let s={};for(let t of e)if(Array.isArray(t)&&3===t.length&&"string"==typeof t[1]&&("string"==typeof t[2]||"number"==typeof t[2])){let e=t[1],r="string"==typeof t[2]?parseFloat(t[2]):t[2];!isNaN(r)&&r>=1&&r<=5&&(s[e]=r)}else if(Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&("string"==typeof t[1]||"number"==typeof t[1])){let e=t[0],r="string"==typeof t[1]?parseFloat(t[1]):t[1];!isNaN(r)&&r>=1&&r<=5&&(s[e]=r)}else{if("object"!=typeof t||null===t||!("dimensionName"in t)||!("score"in t))continue;let e="string"==typeof t.score?parseFloat(t.score):t.score;"string"==typeof t.dimensionName&&!isNaN(e)&&e>=1&&e<=5&&(s[t.dimensionName]=e)}return 0===Object.keys(s).length&&e.length>0?(t.addIssue({code:w.eq.custom,message:"The emotionalProfile array did not contain any items that could be parsed into a valid record. Original array: ".concat(JSON.stringify(e))}),N.tm):s}return e}),priorityAreas:N.YO(N.bz()).optional().nullable().transform((e,t)=>{if(!e)return[];let s=e.flat(),r=N.YO(N.Yj()).safeParse(s);return r.success?r.data.slice(0,3):(t.addIssue({code:w.eq.custom,message:"Priority areas could not be transformed into an array of strings. Original value: ".concat(JSON.stringify(e))}),N.tm)}),feedback:N.Yj().min(1,"El feedback no puede estar vac\xedo."),respuestas:N.KC([N.g1(N.Yj(),N.ai()),N.YO(N.bz())]).optional().nullable().transform(e=>Array.isArray(e)&&0===e.length||"object"!=typeof e||Array.isArray(e)?null:e)})}),O=N.YO(S);function E(){let e=(0,o.c)(),{user:t,loading:s}=(0,v.J)(),[n,N]=(0,a.useState)([]),[w,A]=(0,a.useState)(!0),[S,E]=(0,a.useState)(null),[I,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("workwell-assessment-in-progress");if(e){let t=JSON.parse(e);k(!!t&&!!t.answers&&Object.keys(t.answers).length>0)}else k(!1)}catch(e){console.error("Error checking in-progress assessment:",e),k(!1)}},[t]);let D=(0,a.useCallback)(async()=>{if(!t||!t.id){E(e.errorOccurred+" (Usuario no autenticado o ID de usuario no disponible para la API)"),A(!1),console.warn("MyAssessmentsPage: Fetch aborted. User or user.id is not available.","User:",t);return}A(!0),E(null);let s=(0,d.X_)();N(s);let r="";try{let a=(0,b.Lw)(t.id);r="".concat(T,"?apikey=").concat("4463","&tipo=getEvaluacion&usuario=").concat(encodeURIComponent(a));let n=await fetch(r,{signal:AbortSignal.timeout(2e4)}),i=await n.text(),o=i,l=i.match(/^string\(\d+\)\s*"([\s\S]*)"\s*$/);if(l&&l[1]&&(o=l[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\")),!n.ok)throw Error("".concat(e.errorOccurred," (HTTP ").concat(n.status,"): ").concat(n.statusText||o.substring(0,100)||"Error del servidor"));let c=JSON.parse(o);if("OK"===c.status){let t=null;if(Array.isArray(c.data))t=c.data;else if("string"==typeof c.data&&""!==c.data.trim()){let e=(0,b.xW)(c.data);e&&Array.isArray(e)&&(t=e)}else t=[];let r=O.safeParse(t);if(r.success){let e=r.data.map(e=>{let t=new Date(e.timestamp.includes("T")?e.timestamp:e.timestamp.replace(" ","T"));return{...e,timestamp:isNaN(t.getTime())?e.timestamp:t.toISOString()}}),t=new Map;s.forEach(e=>t.set(e.id,e)),e.forEach(e=>t.set(e.id,e));let a=Array.from(t.values()).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());N(a),(0,d.s9)(a)}else console.error("MyAssessmentsPage: Zod validation failed.",r.error),E(e.errorOccurred+" (Datos de evaluaci\xf3n recibidos no son v\xe1lidos)")}else c.message&&c.message.toLowerCase().includes("no hay evaluaciones")?(N([]),(0,d.s9)([])):E("".concat(e.errorOccurred,": ").concat(c.message||"Error desconocido del servidor"))}catch(e){console.error("MyAssessmentsPage: Error fetching or processing assessments:",e),E("No se pudieron sincronizar las evaluaciones. Mostrando datos guardados en el dispositivo.")}finally{A(!1)}},[t,e]);return((0,a.useEffect)(()=>{!s&&t&&t.id?D():s||t&&t.id||(A(!1),N([]),E(e.errorOccurred+" (Debes iniciar sesi\xf3n y tener un ID de usuario para ver tus evaluaciones)"),console.warn("MyAssessmentsPage: User not loaded or user.id missing. User:",t))},[t,s,D]),s)?(0,r.jsxs)("div",{className:"container mx-auto py-8 text-center",children:[(0,r.jsx)(m.A,{className:"h-12 w-12 animate-spin text-primary mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:e.loading})]}):(0,r.jsxs)("div",{className:"container mx-auto py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-12 text-center sm:text-left",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(u.A,{className:"mx-auto sm:mx-0 h-16 w-16 text-primary mb-4"}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-primary mb-3",children:e.myAssessmentsTitle}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground",children:e.myAssessmentsDescription})]}),(0,r.jsxs)(l.$,{onClick:D,variant:"outline",disabled:w||!t||!t.id,children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 ".concat(w?"animate-spin":"")}),"Refrescar"]})]}),S&&(0,r.jsxs)(j.Fc,{variant:"destructive",className:"mb-8",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)(j.TN,{children:S})]}),I&&(0,r.jsxs)(c.Zp,{className:"mb-8 shadow-lg border-primary bg-primary/10",children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)(c.ZB,{className:"text-primary flex items-center",children:[(0,r.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"Evaluaci\xf3n en Progreso"]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Detectamos que tienes una evaluaci\xf3n guardada sin finalizar. Puedes continuar donde la dejaste."})}),(0,r.jsx)(c.wL,{children:(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsx)(i(),{href:"/assessment/guided",children:"Continuar Evaluaci\xf3n"})})})]}),0===n.length&&!w&&!S&&!I&&(0,r.jsxs)(c.Zp,{className:"max-w-lg mx-auto text-center shadow-lg",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:e.noAssessmentsFound})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"Parece que a\xfan no has completado ninguna evaluaci\xf3n o no se pudieron cargar. Intenta refrescar o realiza una nueva."})}),(0,r.jsx)(c.wL,{className:"justify-center",children:(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsxs)(i(),{href:"/assessment/intro",children:[e.takeInitialAssessment," ",(0,r.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})})})]}),n.length>0&&(0,r.jsx)("div",{className:"space-y-8",children:n.map(t=>(0,r.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow flex flex-col max-w-2xl mx-auto",children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)(y.E,{variant:"outline",className:"text-xs",children:(0,d.k9)(t.timestamp)}),(0,r.jsx)(u.A,{className:"h-5 w-5 text-primary"})]}),(0,r.jsx)(c.ZB,{className:"text-xl text-accent",children:e.assessmentDateLabel.replace("{date}",(0,d.k9)(t.timestamp).split(",")[0])})]}),(0,r.jsx)(c.Wu,{className:"flex-grow",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3",children:t.data.feedback})}),(0,r.jsx)(c.wL,{className:"flex-col items-stretch space-y-4",children:(0,r.jsx)(l.$,{asChild:!0,variant:"default",className:"w-full",children:(0,r.jsxs)(i(),{href:"/assessment/history-results?assessmentId=".concat(t.id),children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"}),e.viewAssessmentResultsButton]})})})]},t.id))})]})}}},e=>{e.O(0,[7416,2992,3176,5380,5658,9779,2619,8734,4371,2447,9141,168,8441,1255,7358],()=>e(e.s=66737)),_N_E=e.O()}]);