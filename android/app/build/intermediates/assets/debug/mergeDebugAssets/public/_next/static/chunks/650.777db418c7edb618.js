"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{21761:(e,a,r)=>{r.r(a),r.d(a,{default:()=>b});var t=r(95155),s=r(12115),n=r(86948),i=r(3998),o=r(76444),l=r(31120),c=r(64581),d=r(65142),u=r(15894),m=r(35626),h=r(52987),f=r(46046),p=r(42529),x=r(90799),v=r(28051),g=r(29141);function b(e){let{content:a,pathId:r,onComplete:b}=e,{toast:j}=(0,u.dj)(),{user:y}=(0,g.J)(),[w,N]=(0,s.useState)(Array(6).fill({name:"",howIShow:"",whatIHide:"",whyIHide:"",authenticity:5})),[q,A]=(0,s.useState)({q1:"",q2:"",q3:"",q4:""}),[k,I]=(0,s.useState)(0),[C,S]=(0,s.useState)(!1),[E,H]=(0,s.useState)(!1),T="exercise-progress-".concat(r,"-authenticityThermometer");(0,s.useEffect)(()=>{H(!0);try{let e=localStorage.getItem(T);if(e){let a=JSON.parse(e);N(a.relations||Array(6).fill({name:"",howIShow:"",whatIHide:"",whyIHide:"",authenticity:5})),A(a.reflection||{q1:"",q2:"",q3:"",q4:""}),I(a.step||0),S(a.isSaved||!1)}}catch(e){console.error("Error loading exercise state:",e)}},[T]),(0,s.useEffect)(()=>{if(E)try{localStorage.setItem(T,JSON.stringify({relations:w,reflection:q,step:k,isSaved:C}))}catch(e){console.error("Error saving exercise state:",e)}},[w,q,k,C,T,E]);let P=(e,a,r)=>{let t=[...w];t[e]={...t[e],[a]:r},N(t)},R=(e,a)=>{A(r=>({...r,[e]:a}))},z=()=>{if(1===k&&w.filter(e=>""!==e.name.trim()).length<3)return void j({title:"Se requieren m\xe1s relaciones",description:"Por favor, completa los nombres de al menos 3 personas para continuar.",variant:"destructive"});I(e=>e+1)},J=()=>I(e=>e-1),M=()=>{let e=w.filter(e=>""!==e.name.trim());if(0===e.length)return void j({title:"Ejercicio Incompleto",description:"Por favor, completa al menos una relaci\xf3n.",variant:"destructive"});let t="**".concat(a.title,"**\n\n");e.forEach(e=>{t+="**Relaci\xf3n con: ".concat(e.name,"**\n"),t+="- C\xf3mo me muestro: ".concat(e.howIShow||"No especificado.","\n"),t+="- Qu\xe9 me callo: ".concat(e.whatIHide||"No especificado.","\n"),t+="- Por qu\xe9 lo hago: ".concat(e.whyIHide||"No especificado.","\n"),t+="- Nivel de autenticidad: ".concat(e.authenticity,"/10\n\n")}),t+="**Reflexi\xf3n Integradora:**\n",t+="- V\xednculos m\xe1s libres: ".concat(q.q1||"No respondido.","\n"),t+="- \xbfQu\xe9 lo permite?: ".concat(q.q2||"No respondido.","\n"),t+="- Patr\xf3n en relaciones dif\xedciles: ".concat(q.q3||"No respondido.","\n"),t+="- Pr\xf3ximo peque\xf1o paso: ".concat(q.q4||"No respondido.","\n"),(0,v.R1)({title:"Mi Term\xf3metro de Autenticidad",content:t,pathId:r,userId:null==y?void 0:y.id}),j({title:"Ejercicio Guardado",description:"Tu reflexi\xf3n ha sido guardada en el Cuaderno Terap\xe9utico."}),S(!0),b(),z()};return(0,t.jsxs)(n.Zp,{className:"bg-muted/30 my-6 shadow-md",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"text-lg text-accent flex items-center",children:[(0,t.jsx)(x.A,{className:"mr-2"}),a.title]}),a.objective&&(0,t.jsx)(n.BT,{className:"pt-2",children:a.objective}),a.audioUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("audio",{controls:!0,controlsList:"nodownload",className:"w-full h-10",children:[(0,t.jsx)("source",{src:a.audioUrl,type:"audio/mp3"}),"Tu navegador no soporta el elemento de audio."]})})]}),(0,t.jsx)(n.Wu,{children:(()=>{switch(k){case 0:return(0,t.jsxs)("div",{className:"p-4 space-y-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Piensa en al menos 3 personas (y hasta un m\xe1ximo de 6) con las que te relaciones de forma habitual. Para cada una, responder\xe1s con sinceridad a unas preguntas para medir tu nivel de autenticidad en ese v\xednculo."}),(0,t.jsx)(i.$,{onClick:z,children:"Empezar mi term\xf3metro"})]});case 1:return(0,t.jsxs)("div",{className:"p-4 space-y-4 animate-in fade-in-0 duration-500",children:[(0,t.jsx)("h4",{className:"font-semibold text-lg",children:"Paso 1: Nombra tus relaciones"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Escribe el nombre o inicial de hasta 6 personas de tu entorno (personal, laboral, etc.). Debes completar al menos 3."}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:w.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o.J,{htmlFor:"name-".concat(a),children:["Persona ",a+1]}),(0,t.jsx)(d.p,{id:"name-".concat(a),value:e.name,onChange:e=>P(a,"name",e.target.value)})]},a))}),(0,t.jsxs)("div",{className:"flex justify-between w-full mt-4",children:[(0,t.jsxs)(i.$,{onClick:J,variant:"outline",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Atr\xe1s"]}),(0,t.jsxs)(i.$,{onClick:z,children:["Siguiente: Detallar ",(0,t.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})]})]});case 2:return(0,t.jsxs)("div",{className:"p-4 space-y-6 animate-in fade-in-0 duration-500",children:[(0,t.jsx)("h4",{className:"font-semibold text-lg",children:"Paso 2: Mide tu autenticidad"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ahora, para cada persona que nombraste, responde con sinceridad."}),w.filter(e=>e.name.trim()).map((e,a)=>(0,t.jsxs)("div",{className:"space-y-3 p-4 border rounded-md bg-background",children:[(0,t.jsx)("h5",{className:"font-bold text-primary",children:e.name}),(0,t.jsx)(o.J,{htmlFor:"how-".concat(a),children:"\xbfC\xf3mo me suelo mostrar con esta persona?"}),(0,t.jsx)(l.T,{id:"how-".concat(a),value:e.howIShow,onChange:e=>P(a,"howIShow",e.target.value),placeholder:"Ej: complaciente, distante..."}),(0,t.jsx)(o.J,{htmlFor:"hide-".concat(a),children:"\xbfQu\xe9 emociones suelo callarme o modificar?"}),(0,t.jsx)(l.T,{id:"hide-".concat(a),value:e.whatIHide,onChange:e=>P(a,"whatIHide",e.target.value),placeholder:"Ej: tristeza, enfado..."}),(0,t.jsx)(o.J,{htmlFor:"why-".concat(a),children:"\xbfQu\xe9 me lo impide?"}),(0,t.jsx)(l.T,{id:"why-".concat(a),value:e.whyIHide,onChange:e=>P(a,"whyIHide",e.target.value),placeholder:"Ej: miedo a decepcionar..."}),(0,t.jsxs)(o.J,{htmlFor:"auth-".concat(a),children:["\xbfQu\xe9 tan aut\xe9ntico/a me siento? ",e.authenticity,"/10"]}),(0,t.jsx)(c.A,{id:"auth-".concat(a),value:[e.authenticity],onValueChange:e=>P(a,"authenticity",e[0]),max:10,step:1})]},a)),(0,t.jsxs)("div",{className:"flex justify-between w-full mt-4",children:[(0,t.jsxs)(i.$,{onClick:J,variant:"outline",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Atr\xe1s"]}),(0,t.jsxs)(i.$,{onClick:z,children:["Ir a la reflexi\xf3n ",(0,t.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})]})]});case 3:return(0,t.jsxs)("div",{className:"p-4 space-y-4 animate-in fade-in-0 duration-500",children:[(0,t.jsx)("h4",{className:"font-semibold text-lg",children:"Paso 3: Reflexi\xf3n Integradora"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Despu\xe9s de completar tus relaciones, responde a estas preguntas."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"\xbfEn qu\xe9 tipo de v\xednculos me siento m\xe1s libre para ser yo?"}),(0,t.jsx)(l.T,{value:q.q1,onChange:e=>R("q1",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"\xbfQu\xe9 me lo permite? (\xbfHay confianza, escucha real, poco juicio?)"}),(0,t.jsx)(l.T,{value:q.q2,onChange:e=>R("q2",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"\xbfQu\xe9 patr\xf3n detecto en las relaciones donde me cuesta m\xe1s mostrarme aut\xe9ntico/a?"}),(0,t.jsx)(l.T,{value:q.q3,onChange:e=>R("q3",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"\xbfQu\xe9 peque\xf1a acci\xf3n podr\xeda probar para empezar a mostrarme un poco m\xe1s como soy?"}),(0,t.jsx)(l.T,{value:q.q4,onChange:e=>R("q4",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-between w-full mt-4",children:[(0,t.jsxs)(i.$,{onClick:J,variant:"outline",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Atr\xe1s"]}),(0,t.jsxs)(i.$,{onClick:M,children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Guardar Ejercicio y Reflexi\xf3n"]})]})]});case 4:return(0,t.jsxs)("div",{className:"p-6 text-center space-y-4 animate-in fade-in-0 duration-500",children:[(0,t.jsx)(p.A,{className:"h-12 w-12 text-green-500 mx-auto"}),(0,t.jsx)("h4",{className:"font-bold text-lg",children:"\xa1Ejercicio Guardado!"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Tu reflexi\xf3n ha sido guardada en el Cuaderno Terap\xe9utico. Puedes revisarla cuando quieras."}),(0,t.jsx)(i.$,{onClick:()=>{I(0),S(!1),N(Array(6).fill({name:"",howIShow:"",whatIHide:"",whyIHide:"",authenticity:5})),A({q1:"",q2:"",q3:"",q4:""})},variant:"outline",children:"Empezar de nuevo"})]});default:return null}})()})]})}},31120:(e,a,r)=>{r.d(a,{T:()=>i});var t=r(95155),s=r(12115),n=r(64269);let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...s})});i.displayName="Textarea"},32894:(e,a,r)=>{r.d(a,{b:()=>l});var t=r(12115);r(47650);var s=r(32467),n=r(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=(0,s.TL)(`Primitive.${a}`),i=t.forwardRef((e,t)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?r:a,{...i,ref:t})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{}),o=t.forwardRef((e,a)=>(0,n.jsx)(i.label,{...e,ref:a,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));o.displayName="Label";var l=o},34212:(e,a,r)=>{r.d(a,{q:()=>t});function t(e,[a,r]){return Math.min(r,Math.max(a,e))}},35626:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46046:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},52987:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(71847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},64581:(e,a,r)=>{r.d(a,{A:()=>o});var t=r(95155),s=r(12115),n=r(83026),i=r(64269);let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)(n.bL,{ref:a,className:(0,i.cn)("relative flex w-full touch-none select-none items-center py-2",r),...s,children:[(0,t.jsx)(n.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(n.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(n.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});o.displayName=n.bL.displayName},65142:(e,a,r)=>{r.d(a,{p:()=>i});var t=r(95155),s=r(12115),n=r(64269);let i=s.forwardRef((e,a)=>{let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","text-foreground",r),ref:a,...i})});i.displayName="Input"},76444:(e,a,r)=>{r.d(a,{J:()=>c});var t=r(95155),s=r(12115),n=r(32894),i=r(83101),o=r(64269);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(n.b,{ref:a,className:(0,o.cn)(l(),r),...s})});c.displayName=n.b.displayName},78108:(e,a,r)=>{r.d(a,{Z:()=>s});var t=r(12115);function s(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}},84288:(e,a,r)=>{r.d(a,{X:()=>n});var t=r(12115),s=r(4129);function n(e){let[a,r]=t.useState(void 0);return(0,s.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let a=new ResizeObserver(a=>{let t,s;if(!Array.isArray(a)||!a.length)return;let n=a[0];if("borderBoxSize"in n){let e=n.borderBoxSize,a=Array.isArray(e)?e[0]:e;t=a.inlineSize,s=a.blockSize}else t=e.offsetWidth,s=e.offsetHeight;r({width:t,height:s})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}r(void 0)},[e]),a}}}]);