"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6462],{31120:(e,a,s)=>{s.d(a,{T:()=>n});var t=s(95155),r=s(12115),i=s(64269);let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});n.displayName="Textarea"},46046:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},50909:(e,a,s)=>{s.d(a,{C:()=>c,z:()=>o});var t=s(95155),r=s(12115),i=s(24058),n=s(99051),l=s(64269);let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",s),...r,ref:a})});o.displayName=i.bL.displayName;let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.q7,{ref:a,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,t.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=i.q7.displayName},76444:(e,a,s)=>{s.d(a,{J:()=>c});var t=s(95155),r=s(12115),i=s(32894),n=s(83101),l=s(64269);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.b,{ref:a,className:(0,l.cn)(o(),s),...r})});c.displayName=i.b.displayName},78108:(e,a,s)=>{s.d(a,{Z:()=>r});var t=s(12115);function r(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}},81696:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(95155),r=s(12115),i=s(86948),n=s(3998),l=s(76444),o=s(31120),c=s(50909),d=s(15894),u=s(90799),m=s(46046),p=s(42529),h=s(28051),v=s(29141);function x(e){let{content:a,pathId:s,onComplete:x}=e,{toast:f}=(0,d.dj)(),{user:g}=(0,v.J)(),[b,j]=(0,r.useState)(""),[N,y]=(0,r.useState)(""),[S,w]=(0,r.useState)(""),[C,E]=(0,r.useState)(""),[k,A]=(0,r.useState)(""),[T,q]=(0,r.useState)(""),[J,D]=(0,r.useState)(""),[F,H]=(0,r.useState)(!1),[z,R]=(0,r.useState)(!1),I="exercise-progress-".concat(s,"-alternativeStories");return((0,r.useEffect)(()=>{R(!0);try{let e=localStorage.getItem(I);if(e){let a=JSON.parse(e);j(a.situation||""),y(a.negativeStory||""),w(a.neutralStory||""),E(a.positiveStory||""),A(a.usualAnticipation||""),q(a.anticipationReason||""),D(a.newPossibilities||""),H(a.isSaved||!1)}}catch(e){console.error("Error loading exercise state:",e)}},[I]),(0,r.useEffect)(()=>{if(z)try{localStorage.setItem(I,JSON.stringify({situation:b,negativeStory:N,neutralStory:S,positiveStory:C,usualAnticipation:k,anticipationReason:T,newPossibilities:J,isSaved:F}))}catch(e){console.error("Error saving exercise state:",e)}},[b,N,S,C,k,T,J,F,I,z]),z)?(0,t.jsxs)(i.Zp,{className:"bg-muted/30 my-6 shadow-md",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"text-lg text-accent flex items-center",children:[(0,t.jsx)(u.A,{className:"mr-2"}),a.title]}),a.audioUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("audio",{controls:!0,controlsList:"nodownload",className:"w-full h-10",children:[(0,t.jsx)("source",{src:a.audioUrl,type:"audio/mp3"}),"Tu navegador no soporta el elemento de audio."]})}),a.objective&&(0,t.jsx)(i.BT,{className:"pt-2",children:a.objective})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!b.trim()||!N.trim()||!S.trim()||!C.trim()||!k.trim())return void f({title:"Campos Incompletos",description:"Por favor, completa todas las historias y selecciona tu anticipaci\xf3n habitual.",variant:"destructive"});let t="\n**Ejercicio: ".concat(a.title,"**\n\n**Elige una situaci\xf3n incierta que te preocupe:**\n").concat(b,"\n\n**Imagina tres versiones posibles:**\n- **Historia Negativa:** ").concat(N,"\n- **Historia Neutral:** ").concat(S,"\n- **Historia Positiva:** ").concat(C,"\n\n**\xbfCu\xe1l sueles anticipar m\xe1s?**\nLa historia ").concat(k,".\n").concat(T?"\n*\xbfPor qu\xe9 crees que sueles imaginar esa opci\xf3n?* ".concat(T):"","\n\n**Abre nuevas posibilidades. \xbfQu\xe9 otras formas de ver esta situaci\xf3n podr\xedas empezar a considerar?**\n").concat(J||"No especificado.","\n    ");(0,h.R1)({title:"Escenario alternativo: ".concat(a.title),content:t,pathId:s,userId:null==g?void 0:g.id}),f({title:"Ejercicio Guardado",description:"Tus 'Historias Alternativas' se han guardado en el Cuaderno Terap\xe9utico."}),H(!0),x()},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"situation",className:"font-semibold",children:"Elige una situaci\xf3n incierta que te preocupe"}),(0,t.jsx)(o.T,{id:"situation",value:b,onChange:e=>j(e.target.value),placeholder:"Ej: Tengo que hablar con mi jefa sobre un tema inc\xf3modo.",disabled:F})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Imagina tres versiones posibles"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"negative-story",className:"text-red-600 dark:text-red-400",children:"\uD83D\uDD34 Historia negativa"}),(0,t.jsx)(o.T,{id:"negative-story",value:N,onChange:e=>y(e.target.value),placeholder:"Ej: Pensar\xe1 que me quejo por todo y se molestar\xe1.",disabled:F})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"neutral-story",className:"text-amber-600 dark:text-amber-400",children:"\uD83D\uDFE0 Historia neutral"}),(0,t.jsx)(o.T,{id:"neutral-story",value:S,onChange:e=>w(e.target.value),placeholder:"Ej: Me escuchar\xe1, pero no se comprometer\xe1 con nada.",disabled:F})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"positive-story",className:"text-green-600 dark:text-green-400",children:"\uD83D\uDFE2 Historia positiva"}),(0,t.jsx)(o.T,{id:"positive-story",value:C,onChange:e=>E(e.target.value),placeholder:"Ej: Agradecer\xe1 que lo comparta y buscar\xe1 una soluci\xf3n.",disabled:F})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{className:"font-semibold",children:"\xbfCu\xe1l sueles anticipar m\xe1s?"}),(0,t.jsxs)(c.z,{onValueChange:A,value:k,className:"space-y-1",disabled:F,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.C,{value:"negativa",id:"antic-neg"}),(0,t.jsx)(l.J,{htmlFor:"antic-neg",className:"font-normal",children:"La historia negativa"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.C,{value:"neutral",id:"antic-neu"}),(0,t.jsx)(l.J,{htmlFor:"antic-neu",className:"font-normal",children:"La historia neutral"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.C,{value:"positiva",id:"antic-pos"}),(0,t.jsx)(l.J,{htmlFor:"antic-pos",className:"font-normal",children:"La historia positiva"})]})]}),(0,t.jsx)(o.T,{value:T,onChange:e=>q(e.target.value),placeholder:"\xbfPor qu\xe9 crees que sueles imaginar esa opci\xf3n? (Opcional)",disabled:F,className:"text-sm mt-2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"new-possibilities",className:"font-semibold",children:"Abre nuevas posibilidades"}),(0,t.jsx)(o.T,{id:"new-possibilities",value:J,onChange:e=>D(e.target.value),placeholder:"\xbfQu\xe9 otras formas de ver esta situaci\xf3n podr\xedas empezar a considerar?",disabled:F})]}),F?(0,t.jsxs)("div",{className:"flex items-center justify-center p-3 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-md",children:[(0,t.jsx)(p.A,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("p",{className:"font-medium",children:"Tu ejercicio ha sido guardado."})]}):(0,t.jsxs)(n.$,{type:"submit",className:"w-full",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Guardar en el cuaderno terap\xe9utico"]})]})})]}):null}},84288:(e,a,s)=>{s.d(a,{X:()=>i});var t=s(12115),r=s(4129);function i(e){let[a,s]=t.useState(void 0);return(0,r.N)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let a=new ResizeObserver(a=>{let t,r;if(!Array.isArray(a)||!a.length)return;let i=a[0];if("borderBoxSize"in i){let e=i.borderBoxSize,a=Array.isArray(e)?e[0]:e;t=a.inlineSize,r=a.blockSize}else t=e.offsetWidth,r=e.offsetHeight;s({width:t,height:r})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}s(void 0)},[e]),a}}}]);