(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9547],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>i});var a=r(95155),s=r(12115),n=r(32467),o=r(83101),l=r(64269);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:s,size:o,className:r})),ref:t,...c})});d.displayName="Button"},13154:(e,t,r)=>{"use strict";r.d(t,{Hm:()=>v,II:()=>h,Nt:()=>p,_3:()=>x,at:()=>m});var a=r(95155),s=r(12115),n=r(26991),o=r(23508),l=r(7620),i=r(64269);let d={light:"",dark:".dark"},c=s.createContext(null);function u(){let e=s.useContext(c);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let m=s.forwardRef((e,t)=>{let{id:r,className:o,children:l,config:d,...u}=e,m=s.useId(),h="chart-".concat(r||m.replace(/:/g,""));return(0,a.jsx)(c.Provider,{value:{config:d},children:(0,a.jsxs)("div",{"data-chart":h,ref:t,className:(0,i.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",o),...u,children:[(0,a.jsx)(f,{id:h,config:d}),(0,a.jsx)(n.u,{children:l})]})})});m.displayName="Chart";let f=e=>{let{id:t,config:r}=e,s=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(d).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[a,s]=e,n=(null==(t=s.theme)?void 0:t[r])||s.color;return n?"  --color-".concat(a,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},h=o.m,p=s.forwardRef((e,t)=>{let{active:r,payload:n,className:o,indicator:l="dot",hideLabel:d=!1,hideIndicator:c=!1,label:m,labelFormatter:f,labelClassName:h,formatter:p,color:x,nameKey:v,labelKey:y}=e,{config:b}=u(),j=s.useMemo(()=>{var e;if(d||!(null==n?void 0:n.length))return null;let[t]=n,r="".concat(y||t.dataKey||t.name||"value"),s=g(b,t,r),o=y||"string"!=typeof m?null==s?void 0:s.label:(null==(e=b[m])?void 0:e.label)||m;return f?(0,a.jsx)("div",{className:(0,i.cn)("font-medium",h),children:f(o,n)}):o?(0,a.jsx)("div",{className:(0,i.cn)("font-medium",h),children:o}):null},[m,f,n,d,h,b,y]);if(!r||!(null==n?void 0:n.length))return null;let w=1===n.length&&"dot"!==l;return(0,a.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",o),children:[w?null:j,(0,a.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let r="".concat(v||e.name||e.dataKey||"value"),s=g(b,e,r),n=x||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,i.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===l&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==s?void 0:s.icon)?(0,a.jsx)(s.icon,{}):!c&&(0,a.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===l,"w-1":"line"===l,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===l,"my-0.5":w&&"dashed"===l}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[w?j:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});p.displayName="ChartTooltip";let x=l.s,v=s.forwardRef((e,t)=>{let{className:r,hideIcon:s=!1,payload:n,verticalAlign:o="bottom",nameKey:l}=e,{config:d}=u();return(null==n?void 0:n.length)?(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",r),children:n.map(e=>{let t="".concat(l||e.dataKey||"value"),r=g(d,e,t);return(0,a.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!s?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null});function g(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=r;return r in t&&"string"==typeof t[r]?s=t[r]:a&&r in a&&"string"==typeof a[r]&&(s=a[r]),s in e?e[s]:e[r]}v.displayName="ChartLegend"},15894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var a=r(12115);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e3);n.set(e,t)},l=[],i={toasts:[]};function d(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),l.forEach(e=>{e(i)})}function c(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=a.useState(i);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},26549:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});let a="https://workwellfut.com"},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42278:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,PN:()=>o});var a=r(19056),s=r(5282),n=r(80160);function o(){console.warn("`clearAllEmotionalEntries` is deprecated.");try{localStorage.removeItem("workwell-emotional-entries"),window.dispatchEvent(new Event("emotional-entries-updated"))}catch(e){console.error("Error clearing emotional entries from localStorage:",e)}}function l(e){if(!e)return"Fecha pendiente...";try{let t="string"==typeof e?(0,a.H)(e):e.toDate();if(isNaN(t.getTime()))return console.warn("Invalid date provided to formatEntryTimestamp:",e),"Fecha inv\xe1lida";return(0,s.GP)(t,"dd MMM yyyy, HH:mm",{locale:n.es})}catch(e){return console.error("Error formatting timestamp:",e),"Fecha inv\xe1lida"}}},47321:(e,t,r)=>{"use strict";r.d(t,{b:()=>c});var a=r(12115);r(47650);var s=r(32467),n=r(95155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,s.TL)(`Primitive.${t}`),o=a.forwardRef((e,a)=>{let{asChild:s,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?r:t,{...o,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),l="horizontal",i=["horizontal","vertical"],d=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:s=l,...d}=e,c=(r=s,i.includes(r))?s:l;return(0,n.jsx)(o.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});d.displayName="Separator";var c=d},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},86259:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var a=r(95155),s=r(12115),n=r(47321),o=r(64269);let l=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:l=!0,...i}=e;return(0,a.jsx)(n.b,{ref:t,decorative:l,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...i})});l.displayName=n.b.displayName},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>o,aR:()=>l,wL:()=>u});var a=r(95155),s=r(12115),n=r(64269);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-base",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},92214:(e,t,r)=>{Promise.resolve().then(r.bind(r,94344))},94344:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r(95155),s=r(12115),n=r(52619),o=r.n(n),l=r(3998),i=r(86948),d=r(50168),c=r(40058),u=r(71456),m=r(42278),f=r(82214),h=r(11010),p=r(35626);let x=(0,r(71847).A)("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);var v=r(35299),g=r(86259),y=r(51834),b=r(15894),j=r(29141),w=r(1554),N=r(19708);let k={alegria:5,confianza:5,sorpresa:4,anticipacion:4,enfado:2,miedo:2,tristeza:1,asco:1};function E(){let e=(0,d.c)(),{toast:t}=(0,b.dj)(),{user:r}=(0,j.J)(),n=(0,w.jt)(),[E,S]=(0,s.useState)([]),[T,_]=(0,s.useState)(!1),[A,C]=(0,s.useState)(!0),M=(0,s.useCallback)(async()=>{if(!(null==r?void 0:r.id)||!n)return void C(!1);C(!0);try{let e=(0,N.rJ)(n,"users",r.id,"emotional_entries"),t=(0,N.P)(e,(0,N.My)("timestamp","desc")),a=(await (0,N.GG)(t)).docs.map(e=>{let t=e.data(),r=t.timestamp;return{id:e.id,...t,timestamp:r?r.toDate().toISOString():new Date().toISOString()}});S(a)}catch(e){console.error("Error loading emotional entries from Firestore:",e),t({title:"Error",description:"No se pudieron cargar los registros emocionales.",variant:"destructive"})}finally{C(!1)}},[null==r?void 0:r.id,n,t]);(0,s.useEffect)(()=>{M()},[M]);let O=async a=>{if(!r||!r.id||!n)return void t({title:"Error de Usuario o Conexi\xf3n",description:"No se pudo identificar al usuario o la base de datos.",variant:"destructive"});_(!1);try{let s=(0,N.rJ)(n,"users",r.id,"emotional_entries");await (0,N.gS)(s,{...a,timestamp:(0,N.O5)()}),t({title:e.emotionalEntrySavedTitle,description:"Tu registro se ha guardado en la nube."}),await M()}catch(e){t({title:"Error al Guardar",description:"No se pudo guardar el registro.",variant:"destructive"})}},D=(0,s.useMemo)(()=>E&&0!==E.length?E.filter(e=>e.timestamp).map(t=>{var r;let a=u.l.find(e=>e.value===t.emotion),s=a?e[a.labelKey]:t.emotion,n=null!=(r=k[t.emotion])?r:0;return{date:(0,m.As)(t.timestamp).split(",")[0],moodScore:n,emotionLabel:s,fullDate:(0,m.As)(t.timestamp)}}).reverse():[],[E,e]);return(0,a.jsxs)("div",{className:"container mx-auto py-8 space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-primary flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2 sm:mr-3 h-7 w-7 sm:h-8 sm:w-8"}),e.fullEmotionalHistoryTitle]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(y.lG,{open:T,onOpenChange:_,children:[(0,a.jsx)(y.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"default",className:"shadow-md",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),e.registerEmotion]})}),(0,a.jsxs)(y.Cf,{className:"sm:max-w-[480px]",children:[(0,a.jsxs)(y.c7,{children:[(0,a.jsx)(y.L3,{className:"text-2xl",children:e.registerEmotionDialogTitle}),(0,a.jsx)(y.rr,{children:e.registerEmotionDialogDescription})]}),(0,a.jsx)(u.T,{onSubmit:O})]})]}),(0,a.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,a.jsxs)(o(),{href:"/dashboard",children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e.backToDashboard]})})]})]}),(0,a.jsx)(c.n,{data:D,title:"Mis autorregistros",description:"Evoluci\xf3n de tus autorregistros a lo largo del tiempo",className:"lg:h-[450px]"}),(0,a.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"text-xl font-semibold text-accent flex items-center",children:[(0,a.jsx)(x,{className:"mr-3 h-6 w-6"}),e.allEmotionalEntriesTitle]}),(0,a.jsx)(i.BT,{children:e.allEmotionalEntriesDescription})]}),(0,a.jsx)(i.Wu,{children:A?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin"})}):E.length>0?(0,a.jsx)("ul",{className:"space-y-4",children:E.map((t,r)=>{let s=u.l.find(e=>e.value===t.emotion),n=s?e[s.labelKey]:t.emotion;return(0,a.jsxs)("li",{className:"p-4 border rounded-lg bg-muted/30 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,m.As)(t.timestamp)}),(0,a.jsx)("p",{className:"font-semibold text-primary mt-1",children:n}),(0,a.jsx)("p",{className:"text-sm text-foreground mt-1 whitespace-pre-wrap break-words",children:t.situation}),t.thought&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2 italic border-l-2 pl-2",children:['"',t.thought,'"']}),r<E.length-1&&(0,a.jsx)(g.w,{className:"my-4"})]},t.id)})}):(0,a.jsx)("p",{className:"text-muted-foreground italic text-center py-4",children:e.noEntriesYet})})]})]})}}},e=>{e.O(0,[7416,2992,3176,5380,5658,8772,9779,2192,2619,7110,3071,891,3409,5608,2663,2447,9141,168,7678,8441,1255,7358],()=>e(e.s=92214)),_N_E=e.O()}]);